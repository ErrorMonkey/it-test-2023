<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/public/css/main.css" />
    <link rel="stylesheet" href="/public/css/index.css" />
    <link rel="icon" href="/public/image/favicon.ico" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/public/JS/sharesns.js"></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <meta property="og:url" content="http://115.85.183.132:8000" />
    <meta property="og:title" content="2023 IT-TEST" />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://github.com/ErrorMonkey/it-test-2023/assets/100561986/70ed8baa-5f5f-43cf-9e6e-0808789e0d84"
    />
    <meta property="og:description" content="2023ë…„ ì œ 1íšŒ IT-TEST" />
    <meta name="twitter:title" , content="2023 IT-TEST" />
    <meta name="twitter:description" , content="2023ë…„ ì œ 1íšŒ IT-TEST" />
    <meta name="twitter:card" , content="card" />
    <meta name="twitter:url" , content="http://115.85.183.132:8000" />
    <meta
      name="twitter:image"
      ,
      content="https://github.com/ErrorMonkey/it-test-2023/assets/100561986/70ed8baa-5f5f-43cf-9e6e-0808789e0d84"
    />
    <title>SEMICOLON</title>
  </head>

  <body>
    <header>
      <a href="/">
        <img class="logo" src="/public/image/logo.png" alt="í—¤ë”ë¡œê³ "
      /></a>
    </header>

    <!-- section1 -->
    <section class="wrapper">
      <div class="main-title">
        <img src="/public/image/title.png" alt="íƒ€ì´í‹€" />
      </div>
      <div>
        <img src="/public/image/octocat.png" alt="ë©”ì¸ìºë¦­í„°" class="octocat" />
      </div>
      <button onclick="startTest()" class="main-btn">ëŠ¥ë ¥ê³ ì‚¬ ì‹œì‘í•˜ê¸°</button>
    </section>

    <!-- section2 -->
    <section class="cont-area">
      <ul>
        <li>
          <div class="box">
            <span class="label">ì‘ì‹œì</span>
            <span class="value" id="totalApplicantsCount">0ëª…</span>
          </div>
          <div class="box">
            <span class="label">ì‘ì‹œì í‰ê·  ì ìˆ˜</span>
            <span class="value" id="averageScoreCount">0ì </span>
          </div>
          <div class="box">
            <span class="label">ë§Œì ì</span>
            <span class="value" id="perfectScoreApplicantsCount">0ëª…</span>
          </div>
        </li>
      </ul>
    </section>

    <!-- section3 -->
    <section class="sesac">
      <div class="sesac-container">
        <img src="/public/image/sesac-logo.png" alt="ìƒˆì‹¹ ë¡œê³ " />
        <p>ê¿ˆê¾¸ëŠ” ê°œë°œì ë°ë·”ì½”ìŠ¤, ìƒˆì‹¹</p>
        <a
          href="https://sesac.seoul.kr/common/greeting.do"
          class="sesac-link-button"
          >í™ˆí˜ì´ì§€</a
        >
      </div>
    </section>

    <!-- section4 -->
    <section class="comment-section">
      <p class="honor">ğŸŒ¿ ëª…ì˜ˆì˜ ì „ë‹¹ ğŸŒ¿</p>
      <% for (let i = 0; i < totalComment.length; i++) { %>
      <div class="comment-box">
        <img
          src="/public/image/profile1.png"
          alt="í”„ë¡œí•„ì‚¬ì§„"
          class="profile"
        />
        <p class="name"><%= totalComment[i].username %></p>
        <div class="comment"><%= totalComment[i].comment %></div>
      </div>
      <% } %>
    </section>

    <!-- float-box -->
    <div class="float-box" onclick="toggleSnsList()">
      <ul class="sns-list">
        <li>
          <a
            id="btnTwitter"
            class="link-icon twitter"
            href="javascript:shareTwitter();"
            >íŠ¸ìœ„í„°</a
          >
        </li>
        <li>
          <a
            id="btnFacebook"
            class="link-icon facebook"
            href="javascript:shareFacebook();"
            >í˜ì´ìŠ¤ë¶</a
          >
        </li>
        <li>
          <a
            id="btnKakao"
            class="link-icon kakao"
            href="javascript:shareKakao();"
            >ì¹´ì¹´ì˜¤í†¡</a
          >
        </li>
        <li>
          <button type="button" class="copy-btn" onclick="clip()">URL</button>
        </li>
      </ul>
      <p>IT-TEST ì†Œë¬¸ë‚´ê¸°</p>
    </div>

    <footer>
      <p>
        ì œì‘: ì„¸ë¯¸ì½œë¡  íŒ€,<br />
        ì‚¬ìš©ëœ ì˜¥í† ìº£ ì´ë¯¸ì§€ ì €ì‘ê¶Œì€ ëª¨ë‘ ê¹ƒí—ˆë¸Œì—ê²Œ ìˆìŠµë‹ˆë‹¤.
      </p>
    </footer>

    <script>
      function startTest() {
        location.href = "/test2023";
      }

      let isCounting = false;
      function countUp(elementId, start, end, duration, suffix) {
        const element = document.getElementById(elementId);
        const range = end - start;
        const increment = range / duration;
        let current = start;
        const startTime = performance.now();

        const updateElement = (timestamp) => {
          const progress = timestamp - startTime;

          if (progress < duration) {
            current = start + increment * progress;
            element.textContent = Math.ceil(current) + suffix;
            requestAnimationFrame(updateElement);
          } else {
            element.textContent = end + suffix;
            isCounting = false;
          }
        };
        requestAnimationFrame(updateElement);
      }

      document.addEventListener("DOMContentLoaded", () => {
        const totalApplicantsEnd = parseInt("<%=totalApplicants %>");
        const averageScoreEnd = parseInt("<%=averageScore %>");
        const perfectScoreApplicantsEnd = parseInt(
          "<%=perfectScoreApplicants %>"
        );
        let isCounting = false;

        window.addEventListener("scroll", () => {
          const scrollPosition = window.scrollY;
          const sectionTop = document.querySelector(".cont-area").offsetTop;
          const windowHeight = window.innerHeight;

          if (!isCounting && scrollPosition >= sectionTop - windowHeight) {
            isCounting = true;

            countUp("totalApplicantsCount", 0, totalApplicantsEnd, 1000, "ëª…");
            countUp("averageScoreCount", 0, averageScoreEnd, 1000, "ì ");
            countUp(
              "perfectScoreApplicantsCount",
              0,
              perfectScoreApplicantsEnd,
              1000,
              "ëª…"
            );
          }
        });
      });
    </script>
  </body>
</html>
